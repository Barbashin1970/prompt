<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ü—Ä–æ–º–ø—Ç–æ–≤ - –£–ª—É—á—à–µ–Ω–Ω–∞—è –í–µ—Ä—Å–∏—è</title>
    <style>
        :root {
            --bg-primary: #F5F5F5;
            --bg-secondary: #FFFFFF;
            --bg-code: #F8F8F8;
            --text-primary: #000000;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --accent-color: #2196F3;
            --accent-hover: #1976D2;
            --error-color: #F44336;
            --success-color: #4CAF50;
            --slider-bg: linear-gradient(to right, #E0E0E0, #2196F3);
        }

        [data-theme="dark"] {
            --bg-primary: #1E1E1E;
            --bg-secondary: #2D2D2D;
            --bg-code: #252525;
            --text-primary: #E0E0E0;
            --text-secondary: #AAAAAA;
            --border-color: #444444;
            --accent-color: #42A5F5;
            --accent-hover: #64B5F6;
            --error-color: #EF5350;
            --success-color: #66BB6A;
            --slider-bg: linear-gradient(to right, #444444, #42A5F5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
        }

        .app-container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        .left-panel {
            width: 400px;
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            padding: 24px;
            transition: background-color 0.3s;
        }

        .right-panel {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 24px;
        }

        .section {
            margin-bottom: 32px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--text-primary);
        }

        .tooltip {
            display: inline-block;
            width: 16px;
            height: 16px;
            background-color: var(--text-secondary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 16px;
            font-size: 11px;
            margin-left: 4px;
            cursor: help;
        }

        input[type="text"],
        textarea,
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: border-color 0.2s, background-color 0.3s, color 0.3s;
        }

        input[type="text"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        input.error,
        textarea.error {
            border-color: var(--error-color);
        }

        .error-message {
            color: var(--error-color);
            font-size: 12px;
            margin-top: 4px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }

        .slider-group {
            margin-bottom: 20px;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .slider-value {
            font-weight: 600;
            color: var(--accent-color);
            font-size: 14px;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--slider-bg);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent-color);
            cursor: pointer;
            transition: transform 0.2s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent-color);
            cursor: pointer;
            border: none;
            transition: transform 0.2s;
        }

        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.2);
        }

        .slider-description {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .button-group {
            display: flex;
            gap: 8px;
            margin-top: 24px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.15s;
            flex: 1;
            min-width: 100px;
        }

        button:hover {
            transform: translateY(-1px);
        }

        button:active {
            transform: translateY(0);
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--accent-hover);
        }

        .btn-primary:disabled {
            background-color: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background-color: var(--border-color);
        }

        .preview-container {
            flex: 1;
            background-color: var(--bg-code);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-y: auto;
            transition: background-color 0.3s;
            resize: none;
            color: var(--text-primary);
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .preview-title {
            font-size: 18px;
            font-weight: 600;
        }

        .stats {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            padding: 12px 20px;
            border-radius: 6px;
            color: white;
            font-size: 14px;
            font-weight: 500;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.2s, transform 0.2s;
            pointer-events: none;
            z-index: 1000;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast.success {
            background-color: var(--success-color);
        }

        .toast.error {
            background-color: var(--error-color);
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(10px); }
            10% { opacity: 1; transform: translateY(0); }
            90% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(10px); }
        }



        @media (max-width: 1024px) {
            .app-container {
                flex-direction: column;
            }

            .left-panel {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                max-height: 50vh;
            }

            .right-panel {
                max-height: 50vh;
            }
        }

        .char-counter {
            font-size: 11px;
            color: var(--text-secondary);
            text-align: right;
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Left Panel -->
        <div class="left-panel">
            <h1>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ü—Ä–æ–º–ø—Ç–æ–≤</h1>
            <p class="subtitle">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –ò–ò</p>



            <!-- Main Parameters -->
            <div class="section">
                <h2 class="section-title">–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>

                <div class="form-group">
                    <label for="role">–†–æ–ª—å</label>
                    <select id="role" aria-label="–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å">
                        <option value="–ê–Ω–∞–ª–∏—Ç–∏–∫ –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏">–ê–Ω–∞–ª–∏—Ç–∏–∫ –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏</option>
                        <option value="–ú–µ—Ç–æ–¥–∏—Å—Ç –ø–æ [–ø—Ä–µ–¥–º–µ—Ç]">–ú–µ—Ç–æ–¥–∏—Å—Ç –ø–æ [–ø—Ä–µ–¥–º–µ—Ç]</option>
                        <option value="–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫ —Å –æ–ø—ã—Ç–æ–º –≤ –ò–ò">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫ —Å –æ–ø—ã—Ç–æ–º –≤ –ò–ò</option>
                        <option value="–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –≤—ã—Å—à–µ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –≤—ã—Å—à–µ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è</option>
                        <option value="–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, –∫—É—Ä–∞—Ç–æ—Ä —É—á–µ–±–Ω–æ–π –≥—Ä—É–ø–ø—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, –∫—É—Ä–∞—Ç–æ—Ä —É—á–µ–±–Ω–æ–π –≥—Ä—É–ø–ø—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</option>
                        <option value="–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –ø—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥—É">–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –ø—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥—É</option>
                        <option value="–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é –∞—É–¥–∏—Ç–æ—Ä–∏–∏">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é –∞—É–¥–∏—Ç–æ—Ä–∏–∏</option>
                        <option value="–ü—Ä–æ–¥—É–∫—Ç–æ–ª–æ–≥ –º–∏—Ä–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è">–ü—Ä–æ–¥—É–∫—Ç–æ–ª–æ–≥ –º–∏—Ä–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è</option>
                        <option value="–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç –º–∏—Ä–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è">–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç –º–∏—Ä–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è</option>
                        <option value="–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º">–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º</option>
                        <option value="–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —É—á–µ–±–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —É—á–µ–±–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="task">–ó–∞–¥–∞—á–∞</label>
                    <select id="task" aria-label="–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É">
                        <option value="–°—É–º–º–∞—Ä–∏–∑–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–∞–π–ª–∞">–°—É–º–º–∞—Ä–∏–∑–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–∞–π–ª–∞</option>
                        <option value="–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç –∏–∑ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç–µ–º–µ">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç –∏–∑ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç–µ–º–µ</option>
                        <option value="–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–¥ —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é">–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–¥ —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é</option>
                        <option value="–°–æ–∑–¥–∞—Ç—å –∫–µ–π—Å –¥–ª—è —Å–µ–º–∏–Ω–∞—Ä–∞">–°–æ–∑–¥–∞—Ç—å –∫–µ–π—Å –¥–ª—è —Å–µ–º–∏–Ω–∞—Ä–∞</option>
                        <option value="–û–±—ä—è—Å–Ω–∏—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é [–∫–æ–Ω—Ü–µ–ø—Ü–∏—è] –≤ –Ω–µ–π—Ä–æ—Å–µ—Ç—è—Ö">–û–±—ä—è—Å–Ω–∏—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é [–∫–æ–Ω—Ü–µ–ø—Ü–∏—è] –≤ –Ω–µ–π—Ä–æ—Å–µ—Ç—è—Ö</option>
                        <option value="–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞–Ω –Ω–æ–≤–æ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –∫—É—Ä—Å–∞">–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞–Ω –Ω–æ–≤–æ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –∫—É—Ä—Å–∞</option>
                        <option value="–ù–∞–ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç –¥–ª—è Telegram-–∫–∞–Ω–∞–ª–∞ –≥—Ä—É–ø–ø—ã">–ù–∞–ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç –¥–ª—è Telegram-–∫–∞–Ω–∞–ª–∞ –≥—Ä—É–ø–ø—ã</option>
                        <option value="–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ">–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</option>
                        <option value="–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –ª–µ–∫—Ü–∏–∏">–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –ª–µ–∫—Ü–∏–∏</option>
                        <option value="–ù–∞–π—Ç–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –∏ –Ω–µ—Å–æ—Å—Ç—ã–∫–æ–≤–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ">–ù–∞–π—Ç–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –∏ –Ω–µ—Å–æ—Å—Ç—ã–∫–æ–≤–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ</option>
                        <option value="–°–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ —Ç–µ–º–µ">–°–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ —Ç–µ–º–µ</option>
                        <option value="–ù–∞–ø–∏—Å–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –Ω–∞–±–æ—Ä–µ –Ω–∞ –∫—É—Ä—Å">–ù–∞–ø–∏—Å–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –Ω–∞–±–æ—Ä–µ –Ω–∞ –∫—É—Ä—Å</option>
                        <option value="–ü—Ä–∏–¥—É–º–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Å—Ç–∞—Ç—å–∏">–ü—Ä–∏–¥—É–º–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Å—Ç–∞—Ç—å–∏</option>
                        <option value="–°–æ–∑–¥–∞—Ç—å Buyer Persona –¥–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏">–°–æ–∑–¥–∞—Ç—å Buyer Persona –¥–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏</option>
                        <option value="–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç">–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="topic">–¢–µ–º–∞ * <span class="tooltip" title="–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –º–∏–Ω–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤">?</span></label>
                    <input type="text" id="topic" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –ø—Ä–æ–º–ø—Ç–∞..." aria-label="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É" aria-required="true">
                    <div class="error-message" id="topicError">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É (–º–∏–Ω–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤)</div>
                    <div class="char-counter" id="topicCounter">0 —Å–∏–º–≤–æ–ª–æ–≤</div>
                </div>

                <div class="form-group">
                    <label for="context">–ö–æ–Ω—Ç–µ–∫—Å—Ç</label>
                    <select id="context" aria-label="–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç">
                        <option value="–®–∏—Ä–æ–∫–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏">–®–∏—Ä–æ–∫–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏</option>
                        <option value="–°—Ç—É–¥–µ–Ω—Ç—ã –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞ (1-2 –∫—É—Ä—Å)">–°—Ç—É–¥–µ–Ω—Ç—ã –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞ (1-2 –∫—É—Ä—Å)</option>
                        <option value="–°—Ç—É–¥–µ–Ω—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Ç–µ—Ç–∞ (3-4 –∫—É—Ä—Å)">–°—Ç—É–¥–µ–Ω—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Ç–µ—Ç–∞ (3-4 –∫—É—Ä—Å)</option>
                        <option value="–ú–∞–≥–∏—Å—Ç—Ä–∞–Ω—Ç—ã —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ [...]">–ú–∞–≥–∏—Å—Ç—Ä–∞–Ω—Ç—ã —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ [...]</option>
                        <option value="–ê—Å–ø–∏—Ä–∞–Ω—Ç—ã –∏ –Ω–∞—É—á–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏">–ê—Å–ø–∏—Ä–∞–Ω—Ç—ã –∏ –Ω–∞—É—á–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                        <option value="–®–∫–æ–ª—å–Ω–∏–∫–∏ (9-11 –∫–ª–∞—Å—Å—ã)">–®–∫–æ–ª—å–Ω–∏–∫–∏ (9-11 –∫–ª–∞—Å—Å—ã)</option>
                        <option value="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã —Å –æ–ø—ã—Ç–æ–º">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã —Å –æ–ø—ã—Ç–æ–º</option>
                        <option value="–ù–æ–≤–∏—á–∫–∏ –≤ –æ–±–ª–∞—Å—Ç–∏">–ù–æ–≤–∏—á–∫–∏ –≤ –æ–±–ª–∞—Å—Ç–∏</option>
                        <option value="IT —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã">IT —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã</option>
                        <option value="–ü–µ–¥–∞–≥–æ–≥–∏ –∏ –º–µ—Ç–æ–¥–∏—Å—Ç—ã">–ü–µ–¥–∞–≥–æ–≥–∏ –∏ –º–µ—Ç–æ–¥–∏—Å—Ç—ã</option>
                        <option value="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —É—á–µ–±–Ω—ã—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —É—á–µ–±–Ω—ã—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π</option>
                        <option value="–†–æ–¥–∏—Ç–µ–ª–∏ –∏ –∑–∞–∫–æ–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–∏">–†–æ–¥–∏—Ç–µ–ª–∏ –∏ –∑–∞–∫–æ–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–∏</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="format">–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞</label>
                    <select id="format" aria-label="–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç">
                        <option value="–¢–µ–∫—Å—Ç –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º–∏">–¢–µ–∫—Å—Ç –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º–∏</option>
                        <option value="Markdown">Markdown</option>
                        <option value="JSON">JSON</option>
                        <option value="HTML">HTML</option>
                        <option value="CSV">CSV</option>
                        <option value="–¢–∞–±–ª–∏—Ü–∞">–¢–∞–±–ª–∏—Ü–∞</option>
                        <option value="–°–ø–∏—Å–æ–∫ —Å –ø—É–Ω–∫—Ç–∞–º–∏">–°–ø–∏—Å–æ–∫ —Å –ø—É–Ω–∫—Ç–∞–º–∏</option>
                        <option value="–ö–æ–¥ (Python/JavaScript)">–ö–æ–¥ (Python/JavaScript)</option>
                        <option value="YAML">YAML</option>
                        <option value="XML">XML</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="constraints">–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</label>
                    <select id="constraints" aria-label="–í—ã–±–µ—Ä–∏—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è">
                        <option value="–¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏">–¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</option>
                        <option value="–ò–∑–±–µ–≥–∞—Ç—å —Å–ª–æ–∂–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏">–ò–∑–±–µ–≥–∞—Ç—å —Å–ª–æ–∂–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏</option>
                        <option value="–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —è–∑—ã–∫">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —è–∑—ã–∫</option>
                        <option value="–ò–∑–±–µ–≥–∞—Ç—å —Å–ª–µ–Ω–≥–∞ –∏ –º–æ–ª–æ–¥—ë–∂–Ω—ã—Ö —Ñ—Ä–∞–∑">–ò–∑–±–µ–≥–∞—Ç—å —Å–ª–µ–Ω–≥–∞ –∏ –º–æ–ª–æ–¥—ë–∂–Ω—ã—Ö —Ñ—Ä–∞–∑</option>
                        <option value="–ë—ã—Ç—å —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–º –∏ –Ω–∞—É—á–Ω—ã–º">–ë—ã—Ç—å —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–º –∏ –Ω–∞—É—á–Ω—ã–º</option>
                        <option value="–ò–∑–±–µ–≥–∞—Ç—å –ª–∏—á–Ω—ã—Ö –º–Ω–µ–Ω–∏–π">–ò–∑–±–µ–≥–∞—Ç—å –ª–∏—á–Ω—ã—Ö –º–Ω–µ–Ω–∏–π</option>
                        <option value="–ú–∞–∫—Å–∏–º—É–º 3 —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏">–ú–∞–∫—Å–∏–º—É–º 3 —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏</option>
                        <option value="–§–æ–∫—É—Å –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö">–§–æ–∫—É—Å –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö</option>
                        <option value="–ò–∑–±–µ–≥–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä–æ–≤">–ò–∑–±–µ–≥–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä–æ–≤</option>
                        <option value="–£—á–∏—Ç—ã–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è">–£—á–∏—Ç—ã–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</option>
                    </select>
                </div>
            </div>

            <!-- Quality Parameters -->
            <div class="section">
                <h2 class="section-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞</h2>

                <div class="slider-group">
                    <div class="slider-header">
                        <label for="detail">–£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ <span class="tooltip" title="–û—Ç –æ–±—â–∏—Ö —Å–≤–µ–¥–µ–Ω–∏–π –¥–æ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞">?</span></label>
                        <span class="slider-value" id="detailValue">5</span>
                    </div>
                    <input type="range" id="detail" min="0" max="10" value="5" aria-label="–£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏" role="slider">
                    <div class="slider-description" id="detailDesc">–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏</div>
                </div>

                <div class="slider-group">
                    <div class="slider-header">
                        <label for="structure">–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å <span class="tooltip" title="–û—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Å—Ç–∏–ª—è –¥–æ —Å—Ç—Ä–æ–≥–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã">?</span></label>
                        <span class="slider-value" id="structureValue">5</span>
                    </div>
                    <input type="range" id="structure" min="0" max="10" value="5" aria-label="–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å" role="slider">
                    <div class="slider-description" id="structureDesc">–°—Ä–µ–¥–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å</div>
                </div>

                <div class="slider-group">
                    <div class="slider-header">
                        <label for="formality">–§–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å —Ç–æ–Ω–∞ <span class="tooltip" title="–û—Ç –¥—Ä—É–∂–µ—Å–∫–æ–≥–æ –¥–æ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–∏–ª—è">?</span></label>
                        <span class="slider-value" id="formalityValue">5</span>
                    </div>
                    <input type="range" id="formality" min="0" max="10" value="5" aria-label="–§–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å" role="slider">
                    <div class="slider-description" id="formalityDesc">–°—Ä–µ–¥–Ω—è—è —Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å</div>
                </div>

                <div class="slider-group">
                    <div class="slider-header">
                        <label for="creativity">–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å <span class="tooltip" title="–û—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –¥–æ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ">?</span></label>
                        <span class="slider-value" id="creativityValue">5</span>
                    </div>
                    <input type="range" id="creativity" min="0" max="10" value="5" aria-label="–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å" role="slider">
                    <div class="slider-description" id="creativityDesc">–°—Ä–µ–¥–Ω—è—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                </div>

                <div class="slider-group">
                    <div class="slider-header">
                        <label for="depth">–ì–ª—É–±–∏–Ω–∞ –∞–Ω–∞–ª–∏–∑–∞ <span class="tooltip" title="–û—Ç –±–∞–∑–æ–≤–æ–≥–æ –¥–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è">?</span></label>
                        <span class="slider-value" id="depthValue">5</span>
                    </div>
                    <input type="range" id="depth" min="0" max="10" value="5" aria-label="–ì–ª—É–±–∏–Ω–∞ –∞–Ω–∞–ª–∏–∑–∞" role="slider">
                    <div class="slider-description" id="depthDesc">–°—Ä–µ–¥–Ω—è—è –≥–ª—É–±–∏–Ω–∞</div>
                </div>

                <div class="slider-group">
                    <div class="slider-header">
                        <label for="responseLength">–û–±—ä—ë–º –æ—Ç–≤–µ—Ç–∞ <span class="tooltip" title="–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –æ—Ç–≤–µ—Ç–∞">?</span></label>
                        <span class="slider-value" id="responseLengthValue">4000</span>
                    </div>
                    <input type="range" id="responseLength" min="2000" max="8000" step="2000" value="4000" aria-label="–û–±—ä—ë–º –æ—Ç–≤–µ—Ç–∞" role="slider">
                    <div class="slider-description" id="responseLengthDesc">–°—Ä–µ–¥–Ω–∏–π –æ–±—ä—ë–º (~4000 —Å–∏–º–≤–æ–ª–æ–≤)</div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="button-group">
                <button type="button" class="btn-primary" id="copyBtn" aria-label="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç">üìã Copy Prompt</button>
                <button type="button" class="btn-secondary" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåô –¢–µ–º–∞</button>
            </div>
        </div>

        <!-- Right Panel -->
        <div class="right-panel">
            <div class="preview-header">
                <h2 class="preview-title">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–º–ø—Ç–∞</h2>
                <div class="stats" id="stats">0 —Å–∏–º–≤–æ–ª–æ–≤ | ~0 –º–∏–Ω —á—Ç–µ–Ω–∏—è</div>
            </div>
            <textarea id="promptPreview" class="preview-container" spellcheck="false" placeholder="–ü—Ä–æ–º–ø—Ç –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –∑–¥–µ—Å—å...">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ª–µ–≤–∞, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç...</textarea>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // Default state configuration
        const DEFAULT_STATE = {
            version: 1,
            role: "–ê–Ω–∞–ª–∏—Ç–∏–∫ –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏",
            task: "–°—É–º–º–∞—Ä–∏–∑–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–∞–π–ª–∞",
            topic: "–°–∫–∞–∑–∫–∞ –ø—Ä–æ –†–µ–ø–∫—É –∏ –ö–æ–ª–æ–±–∫–∞",
            context: "–®–∏—Ä–æ–∫–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏",
            format: "–¢–µ–∫—Å—Ç –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º–∏",
            constraints: "–¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏",
            detail: 5,
            structure: 5,
            formality: 5,
            creativity: 5,
            depth: 5,
            responseLength: 4000
        };

        // Storage Manager using JavaScript variables (localStorage not available in sandbox)
        const StorageManager = {
            storage: {
                promptBuilderState: null,
                promptBuilderTheme: null
            },

            save(key, data) {
                try {
                    this.storage[key] = JSON.parse(JSON.stringify(data)); // Deep clone
                    return true;
                } catch (e) {
                    console.error('Storage error:', e);
                    return false;
                }
            },

            load(key, defaultValue = null) {
                try {
                    const item = this.storage[key];
                    return item !== null && item !== undefined ? item : defaultValue;
                } catch (e) {
                    console.error('Load error:', e);
                    return defaultValue;
                }
            },

            clear(key) {
                try {
                    this.storage[key] = null;
                    return true;
                } catch (e) {
                    console.error('Clear error:', e);
                    return false;
                }
            }
        };

        // Prompt Generator
        const PromptGenerator = {
            buildPrompt(config) {
                try {
                    // Validation
                    if (!config.role || !config.task || !config.topic || !config.context || !config.format) {
                        return '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (—Ä–æ–ª—å, –∑–∞–¥–∞—á–∞, —Ç–µ–º–∞, –∫–æ–Ω—Ç–µ–∫—Å—Ç, —Ñ–æ—Ä–º–∞—Ç)';
                    }

                    // Format response length text
                    let lengthText = '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ (~4000 —Å–∏–º–≤–æ–ª–æ–≤)';
                    if (config.responseLength === 2000) lengthText = '–ö—Ä–∞—Ç–∫–æ (~2000 —Å–∏–º–≤–æ–ª–æ–≤)';
                    else if (config.responseLength === 4000) lengthText = '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ (~4000 —Å–∏–º–≤–æ–ª–æ–≤)';
                    else if (config.responseLength === 6000) lengthText = '–ü–æ–¥—Ä–æ–±–Ω–æ (~6000 —Å–∏–º–≤–æ–ª–æ–≤)';
                    else if (config.responseLength === 8000) lengthText = '–û—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ (~8000 —Å–∏–º–≤–æ–ª–æ–≤)';

                    // Build structured prompt with ::: and square brackets
                    const prompt = `::: –î–µ–π—Å—Ç–≤—É–π –∫–∞–∫: ${config.role}
::: –ó–∞–¥–∞—á–∞: ${config.task}
::: –¢–µ–º–∞: ${config.topic}
::: –ö–æ–Ω—Ç–µ–∫—Å—Ç/–ê—É–¥–∏—Ç–æ—Ä–∏—è: ${config.context}
::: –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞: ${config.format}
::: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: ${config.constraints}
::: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞: [–£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏: ${config.detail}/10], [–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å: ${config.structure}/10], [–§–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å: ${config.formality}/10], [–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å: ${config.creativity}/10], [–ì–ª—É–±–∏–Ω–∞ –∞–Ω–∞–ª–∏–∑–∞: ${config.depth}/10], [–û–±—ä—ë–º –æ—Ç–≤–µ—Ç–∞: ${lengthText}]

–ù–∞—á–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:`;

                    return prompt;
                } catch (err) {
                    console.error('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–∞:', err);
                    return '–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–∞';
                }
            },

            getLengthLabel(length) {
                if (length <= 2000) return '–ö—Ä–∞—Ç–∫–æ (~2000 —Å–∏–º–≤–æ–ª–æ–≤)';
                if (length <= 4000) return '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ (~4000 —Å–∏–º–≤–æ–ª–æ–≤)';
                if (length <= 6000) return '–ü–æ–¥—Ä–æ–±–Ω–æ (~6000 —Å–∏–º–≤–æ–ª–æ–≤)';
                return '–û—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ (~8000 —Å–∏–º–≤–æ–ª–æ–≤)';
            },

            validateConfig(config) {
                return config.topic && config.topic.trim().length >= 5;
            }
        };



        // UI Manager
        const UIManager = {
            elements: {},
            debounceTimer: null,

            init() {
                // Cache DOM elements
                this.elements = {
                    role: document.getElementById('role'),
                    task: document.getElementById('task'),
                    topic: document.getElementById('topic'),
                    context: document.getElementById('context'),
                    format: document.getElementById('format'),
                    constraints: document.getElementById('constraints'),
                    detail: document.getElementById('detail'),
                    structure: document.getElementById('structure'),
                    formality: document.getElementById('formality'),
                    creativity: document.getElementById('creativity'),
                    depth: document.getElementById('depth'),
                    responseLength: document.getElementById('responseLength'),
                    preview: document.getElementById('preview'),
                    stats: document.getElementById('stats'),
                    copyBtn: document.getElementById('copyBtn'),
                    themeToggle: document.getElementById('themeToggle'),
                    promptPreview: document.getElementById('promptPreview'),
                    topicError: document.getElementById('topicError'),
                    topicCounter: document.getElementById('topicCounter'),
                    toast: document.getElementById('toast')
                };

                this.attachEventListeners();
                this.loadState();
                this.loadTheme();
                this.updatePreview();
            },

            attachEventListeners() {
                console.log('üìé Attaching event listeners...');
                
                // Form changes
                const formElements = ['role', 'task', 'topic', 'context', 'format', 'constraints',
                                     'detail', 'structure', 'formality', 'creativity', 'depth', 'responseLength'];
                
                formElements.forEach(name => {
                    const el = this.elements[name];
                    if (el) {
                        el.addEventListener('input', () => this.handleFormChange());
                        el.addEventListener('change', () => this.handleFormChange());
                    }
                });

                // Sliders
                ['detail', 'structure', 'formality', 'creativity', 'depth', 'responseLength'].forEach(name => {
                    const slider = this.elements[name];
                    if (slider) {
                        slider.addEventListener('input', () => this.updateSlider(name));
                    }
                });

                // Topic validation
                this.elements.topic.addEventListener('input', () => {
                    this.validateTopic();
                    this.updateCharCounter();
                });

                // Buttons
                this.elements.copyBtn.addEventListener('click', () => this.copyPrompt());
                this.elements.themeToggle.addEventListener('click', () => this.toggleTheme());
                
                console.log('‚úÖ Event listeners attached (except Reset)');
            },

            handleFormChange() {
                clearTimeout(this.debounceTimer);
                this.debounceTimer = setTimeout(() => {
                    this.saveState();
                    this.updatePreview();
                }, 300);
            },

            updateSlider(name) {
                const slider = this.elements[name];
                const value = slider.value;
                const valueSpan = document.getElementById(`${name}Value`);
                const descSpan = document.getElementById(`${name}Desc`);

                if (valueSpan) {
                    valueSpan.textContent = value;
                }

                if (descSpan) {
                    descSpan.textContent = this.getSliderDescription(name, value);
                }
            },

            getSliderDescription(name, value) {
                const descriptions = {
                    detail: {
                        low: '–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ, –æ–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è',
                        mid: '–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏',
                        high: '–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä, –≤—Å—ë –≤–∫–ª—é—á–µ–Ω–æ'
                    },
                    structure: {
                        low: '–°–≤–æ–±–æ–¥–Ω—ã–π —Å—Ç–∏–ª—å, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥',
                        mid: '–°—Ä–µ–¥–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å',
                        high: '–°—Ç—Ä–æ–≥–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫'
                    },
                    formality: {
                        low: '–î—Ä—É–∂–µ—Å–∫–∏–π, —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π —Ç–æ–Ω',
                        mid: '–°—Ä–µ–¥–Ω—è—è —Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å',
                        high: '–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π, —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å'
                    },
                    creativity: {
                        low: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥',
                        mid: '–°—Ä–µ–¥–Ω—è—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å',
                        high: '–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —É–≥–æ–ª –∑—Ä–µ–Ω–∏—è'
                    },
                    depth: {
                        low: '–ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å, –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã',
                        mid: '–°—Ä–µ–¥–Ω—è—è –≥–ª—É–±–∏–Ω–∞',
                        high: '–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏'
                    },
                    responseLength: {
                        2000: '–ö—Ä–∞—Ç–∫–æ (~2000 —Å–∏–º–≤–æ–ª–æ–≤)',
                        4000: '–°—Ä–µ–¥–Ω–∏–π –æ–±—ä—ë–º (~4000 —Å–∏–º–≤–æ–ª–æ–≤)',
                        6000: '–ü–æ–¥—Ä–æ–±–Ω–æ (~6000 —Å–∏–º–≤–æ–ª–æ–≤)',
                        8000: '–û—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ (~8000 —Å–∏–º–≤–æ–ª–æ–≤)'
                    }
                };

                if (name === 'responseLength') {
                    return descriptions[name][value] || '–°—Ä–µ–¥–Ω–∏–π –æ–±—ä—ë–º';
                }

                const val = parseInt(value);
                if (val <= 3) return descriptions[name].low;
                if (val <= 7) return descriptions[name].mid;
                return descriptions[name].high;
            },

            validateTopic() {
                const topic = this.elements.topic.value.trim();
                const isValid = topic.length >= 5;
                
                if (topic.length > 0 && !isValid) {
                    this.elements.topic.classList.add('error');
                    this.elements.topicError.classList.add('show');
                } else {
                    this.elements.topic.classList.remove('error');
                    this.elements.topicError.classList.remove('show');
                }

                // Update copy button state
                this.elements.copyBtn.disabled = !isValid;
                
                return isValid;
            },

            updateCharCounter() {
                const count = this.elements.topic.value.length;
                this.elements.topicCounter.textContent = `${count} —Å–∏–º–≤–æ–ª–æ–≤`;
            },

            updatePreview() {
                const config = this.getCurrentConfig();
                const prompt = PromptGenerator.buildPrompt(config);
                
                this.elements.promptPreview.value = prompt;
                
                // Update stats
                const charCount = prompt.length;
                const readTime = Math.ceil(charCount / 1000); // ~1000 chars per minute
                this.elements.stats.textContent = `${charCount} —Å–∏–º–≤–æ–ª–æ–≤ | ~${readTime} –º–∏–Ω —á—Ç–µ–Ω–∏—è`;
            },

            getCurrentConfig() {
                return {
                    version: 1,
                    role: this.elements.role.value,
                    task: this.elements.task.value,
                    topic: this.elements.topic.value,
                    context: this.elements.context.value,
                    format: this.elements.format.value,
                    constraints: this.elements.constraints.value,
                    detail: parseInt(this.elements.detail.value),
                    structure: parseInt(this.elements.structure.value),
                    formality: parseInt(this.elements.formality.value),
                    creativity: parseInt(this.elements.creativity.value),
                    depth: parseInt(this.elements.depth.value),
                    responseLength: parseInt(this.elements.responseLength.value)
                };
            },

            saveState() {
                const config = this.getCurrentConfig();
                StorageManager.save('promptBuilderState', config);
            },

            loadState() {
                const savedState = StorageManager.load('promptBuilderState');
                const config = savedState || DEFAULT_STATE;
                this.applyConfig(config);
                // Initialize sliders display
                ['detail', 'structure', 'formality', 'creativity', 'depth', 'responseLength'].forEach(name => {
                    this.updateSlider(name);
                });
                this.updateCharCounter();
            },

            applyConfig(config) {
                if (config.role) this.elements.role.value = config.role;
                if (config.task) this.elements.task.value = config.task;
                if (config.topic) this.elements.topic.value = config.topic;
                if (config.context) this.elements.context.value = config.context;
                if (config.format) this.elements.format.value = config.format;
                if (config.constraints) this.elements.constraints.value = config.constraints;
                if (config.detail !== undefined) this.elements.detail.value = config.detail;
                if (config.structure !== undefined) this.elements.structure.value = config.structure;
                if (config.formality !== undefined) this.elements.formality.value = config.formality;
                if (config.creativity !== undefined) this.elements.creativity.value = config.creativity;
                if (config.depth !== undefined) this.elements.depth.value = config.depth;
                if (config.responseLength !== undefined) this.elements.responseLength.value = config.responseLength;
            },

            async copyPrompt() {
                // –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç –∏–∑ textarea
                const promptText = this.elements.promptPreview.value;
                
                if (!promptText || promptText.trim().length === 0) {
                    this.showToast('–û—à–∏–±–∫–∞: –ü—Ä–æ–º–ø—Ç –ø—É—Å—Ç', 'error');
                    return;
                }
                
                // –ü–æ–ø—ã—Ç–∫–∞ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    try {
                        await navigator.clipboard.writeText(promptText);
                        
                        // –ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—Ö
                        this.showSuccess('‚úì –ü—Ä–æ–º–ø—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                        
                        // –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –Ω–∞ –≤—Ä–µ–º—è
                        const btn = this.elements.copyBtn;
                        const originalText = btn.textContent;
                        btn.textContent = '‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                        btn.style.backgroundColor = '#4CAF50';
                        
                        setTimeout(() => {
                            btn.textContent = originalText;
                            btn.style.backgroundColor = '';
                        }, 2000);
                        
                    } catch (err) {
                        console.error('Clipboard API –æ—à–∏–±–∫–∞:', err);
                        // Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±
                        this.fallbackCopyToClipboard(promptText);
                    }
                } else {
                    // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                    this.fallbackCopyToClipboard(promptText);
                }
            },

            // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ –±–µ–∑ Clipboard API
            fallbackCopyToClipboard(promptText) {
                try {
                    // –°–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π textarea
                    const textarea = document.createElement('textarea');
                    textarea.value = promptText;
                    textarea.style.position = 'fixed';
                    textarea.style.opacity = '0';
                    textarea.style.top = '0';
                    textarea.style.left = '0';
                    
                    document.body.appendChild(textarea);
                    
                    // –í—ã–±—Ä–∞—Ç—å —Ç–µ–∫—Å—Ç
                    textarea.select();
                    textarea.setSelectionRange(0, 99999); // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
                    
                    // –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                    const successful = document.execCommand('copy');
                    
                    // –£–¥–∞–ª–∏—Ç—å textarea
                    document.body.removeChild(textarea);
                    
                    if (successful) {
                        // –ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—Ö
                        this.showSuccess('‚úì –ü—Ä–æ–º–ø—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                        
                        // –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –Ω–∞ –≤—Ä–µ–º—è
                        const btn = this.elements.copyBtn;
                        const originalText = btn.textContent;
                        btn.textContent = '‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                        btn.style.backgroundColor = '#4CAF50';
                        
                        setTimeout(() => {
                            btn.textContent = originalText;
                            btn.style.backgroundColor = '';
                        }, 2000);
                    } else {
                        this.showToast('–û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞', 'error');
                    }
                } catch (err) {
                    console.error('Fallback –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∞:', err);
                    this.showToast('–û—à–∏–±–∫–∞: –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞', 'error');
                }
            },





            toggleTheme() {
                const body = document.body;
                const currentTheme = body.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                body.setAttribute('data-theme', newTheme);
                StorageManager.save('promptBuilderTheme', newTheme);
                
                this.elements.themeToggle.textContent = newTheme === 'dark' ? '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è' : 'üåô –¢—ë–º–Ω–∞—è';
            },

            loadTheme() {
                const savedTheme = StorageManager.load('promptBuilderTheme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const theme = savedTheme || (prefersDark ? 'dark' : 'light');
                
                document.body.setAttribute('data-theme', theme);
                this.elements.themeToggle.textContent = theme === 'dark' ? '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è' : 'üåô –¢—ë–º–Ω–∞—è';
            },



            showToast(message, type = 'success') {
                const toast = this.elements.toast;
                toast.textContent = message;
                toast.className = `toast ${type} show`;
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            },

            // –ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—Ö (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥)
            showSuccess(message) {
                this.showToast(message, 'success');
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è...');
            UIManager.init();
        });
    </script>
</body>
</html>
